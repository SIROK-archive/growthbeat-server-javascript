var Growthbeat;!function(a){var b=function(){function a(){}return a.get=function(a){if(!document.cookie)return null;var b=document.cookie.split("; ");for(var c in b){var d=b[c].split("=");if(d[0]==a)return decodeURIComponent(d[1])}return null},a.set=function(a,b,c){var d=a+"="+encodeURIComponent(b);d+="; expires="+new Date((new Date).getTime()+c).toUTCString(),document.cookie=d},a}();a.CookieUtils=b}(Growthbeat||(Growthbeat={}));var Growthbeat;!function(a){var b=function(){function a(){}return a}();a.Url=b;var c=function(){function a(){}return a.parseUrl=function(a){var b=a.match(/^(([^:\/?#]+):\/\/)?([^:\/?#]+)(:([0-9]+))?\/?/);return{scheme:b[2]?b[2]:void 0,domain:b[3]?b[3]:void 0,port:b[5]?parseInt(b[5]):void 0}},a}();a.HttpUtils=c}(Growthbeat||(Growthbeat={}));var Growthbeat;!function(a){var b=function(){function b(){}return b.get=function(b,c,d){var e=document.createElement("div"),f='<iframe id="growthbeatXdmView" src="{{url}}" style="position: absolute; top: -10000px; height: 0px; width: 0px;"></iframe>';e.innerHTML=f.replace("{{url}}",b);var g=e.getElementsByTagName("iframe")[0];window.addEventListener("message",function(b){var f=a.HttpUtils.parseUrl(b.origin).domain,h=a.HttpUtils.parseUrl(a.baseUrl).domain;f==h&&b.source==g.contentWindow&&(c(b.data),d.removeChild(e))},!1),d.appendChild(e)},b}();a.Xdm=b}(Growthbeat||(Growthbeat={}));var Growthbeat;!function(a){var b=function(){function b(){}return b.prototype.show=function(b){this.element=document.createElement("div");var c='<iframe id="growthbeatHeaderView" src="{{baseUrl}}header" allowtransparency="true" style="width: 100%; height: {{height}}px; border-style: none; position: fixed; top: 0px; padding: 0px; margin: 0px; z-index: 100000;"></iframe><div style="width: 100%; height: {{height}}px;"></div>';this.element.innerHTML=c.replace("{{baseUrl}}",a.baseUrl).replace("{{height}}",a.headerHeight.toString());var d=this.element.getElementsByTagName("iframe")[0];window.addEventListener("message",function(a){"http://localhost:8085"===a.origin&&a.source==d.contentWindow&&(console.log("Receive message: "+a.data),open())},!1),b.appendChild(this.element)},b.prototype.open=function(){var a=this.element.getElementsByTagName("iframe")[0];a.style.height=window.innerHeight+"px"},b.prototype.close=function(){var b=this.element.getElementsByTagName("iframe")[0];b.style.height=a.headerHeight+"px"},b}();a.HeaderView=b}(Growthbeat||(Growthbeat={}));var Growthbeat;!function(a){var b=function(){function b(){a.baseUrl=a.baseUrl||"https://growthbeat.com/",a.headerHeight=a.headerHeight||60,a.rootElementId=a.rootElementId||"growthbeat",a.cookieName=a.cookieName||"growthbeatConnectionId",a.cookieDuration=a.cookieDuration||12096e5}return b.prototype.start=function(){var b=document.createElement("div");if(b.id=a.rootElementId,document.body.insertBefore(b,document.body.childNodes[0]),a.CookieUtils.get(a.cookieName))return void(new a.HeaderView).show(b);var c=window.location.hostname;a.Xdm.get(a.baseUrl+"xdm/accounts?serviceId="+a.serviceId+"&domain="+c,function(d){var e=JSON.parse(d);return e&&e.id?void a.Xdm.get(a.baseUrl+"xdm/connections?serviceId="+a.serviceId+"&domain="+c,function(b){var c=JSON.parse(b);c.id&&(a.CookieUtils.set(a.cookieName,c.id,a.cookieDuration),location.reload())},b):void(location.href=a.baseUrl+"login?seviceId="+a.serviceId)},b)},b}();a.Core=b}(Growthbeat||(Growthbeat={})),function(){console.log("Load Growthbeat library"),(new Growthbeat.Core).start()}();